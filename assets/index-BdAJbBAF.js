var v=Object.defineProperty;var R=(o,s,r)=>s in o?v(o,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[s]=r;var a=(o,s,r)=>R(o,typeof s!="symbol"?s+"":s,r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(i){if(i.ep)return;i.ep=!0;const h=r(i);fetch(i.href,h)}})();class w{constructor({position:s,imageSrc:r,scale:l=1,framesMax:i=1}){a(this,"position");a(this,"scale");a(this,"framesMax");a(this,"framesCurrent");a(this,"framesElapsed");a(this,"framesHold");a(this,"image");this.position=s,this.scale=l,this.framesMax=i,this.image=new Image,this.image.src=r,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=7}draw(){p.drawImage(this.image,this.framesCurrent*(this.image.width/this.framesMax),0,this.image.width/this.framesMax,this.image.height,this.position.x,this.position.y,this.image.width/this.framesMax*this.scale,this.image.height*this.scale)}update(){this.draw(),this.framesElapsed++,this.framesElapsed%this.framesHold===0&&(this.framesCurrent<this.framesMax-1?this.framesCurrent++:this.framesCurrent=0)}}class m extends w{constructor({position:r,velocity:l,offset:i,imageSrc:h,scale:d=1,framesMax:k=1}){super({imageSrc:h,scale:d,framesMax:k,position:r});a(this,"velocity");a(this,"height");a(this,"width");a(this,"lastKeyPressed");a(this,"isAttacking");a(this,"attackRow");a(this,"health");this.height=150,this.width=50,this.isAttacking=!1,this.health=100,this.lastKeyPressed="",this.velocity=l,this.attackRow={position:{x:this.position.x,y:this.position.y},offset:i,width:100,height:50},this.framesCurrent=0,this.framesElapsed=0,this.framesHold=7}update(){this.draw(),this.attackRow.position.x=this.position.x+this.attackRow.offset.x,this.attackRow.position.y=this.position.y+this.attackRow.offset.y,this.position.x+=this.velocity.x,this.position.y+this.velocity.y>0&&(this.position.y+=this.velocity.y),this.position.y+this.height+this.velocity.y>=n.height-96?this.velocity.y=0:this.velocity.y+=L,this.position.x+this.width+this.velocity.x>=n.width&&(this.velocity.x=0)}attack(){this.isAttacking=!0,setTimeout(()=>{this.isAttacking=!1},100)}}const n=document.querySelector("canvas"),A=document.querySelector("#player-health"),b=document.querySelector("#enemy-health"),y=document.querySelector("#display-text"),P=document.querySelector(".timer"),p=n.getContext("2d"),L=1;n.width=1024;n.height=576;const S=new w({position:{x:0,y:0},imageSrc:"/background.png"}),C=new w({position:{x:630,y:128},imageSrc:"/shop.png",scale:2.75,framesMax:6}),t=new m({position:{x:10,y:0},velocity:{x:0,y:0},offset:{x:0,y:0},imageSrc:"/Rigrider/Idle.png",framesMax:11,scale:2.5}),e=new m({position:{x:n.width-60,y:0},velocity:{x:0,y:0},offset:{x:-50,y:0},imageSrc:"/Sophi/Idle.png",framesMax:11,scale:2.5}),c={a:{pressed:!1},d:{pressed:!1},ArrowLeft:{pressed:!1},ArrowRight:{pressed:!1}};let f=10;const g=()=>{window.requestAnimationFrame(g),p.fillStyle="black",p.fillRect(0,0,n.width,n.height),S.draw(),C.update(),t.update(),e.update(),t.velocity.x=0,e.velocity.x=0,c.a.pressed&&t.lastKeyPressed==="a"&&(t.velocity.x=-5,t.position.x+t.velocity.x===0&&(t.velocity.x=0)),c.d.pressed&&t.lastKeyPressed==="d"&&(t.velocity.x=5,t.position.x+t.width+t.velocity.x>=n.width&&(t.velocity.x=0)),c.ArrowLeft.pressed&&e.lastKeyPressed==="ArrowLeft"&&(e.velocity.x=-5,e.position.x+e.velocity.x===0&&(e.velocity.x=0)),c.ArrowRight.pressed&&e.lastKeyPressed==="ArrowRight"&&(e.velocity.x=5,e.position.x+e.width+e.velocity.x>=n.width&&(e.velocity.x=0)),e.position.y+e.height>=t.attackRow.position.y&&e.position.y<=t.attackRow.position.y+t.attackRow.height&&e.position.x+e.width>=t.attackRow.position.x&&e.position.x<=t.attackRow.position.x+t.attackRow.width&&t.isAttacking&&(e.health-=10,t.isAttacking=!1,b.style.width=`${e.health}%`),t.position.y+t.height>=e.attackRow.position.y&&t.position.y<=e.attackRow.position.y+e.attackRow.height&&t.position.x+t.width>=e.attackRow.position.x&&t.position.x<=e.attackRow.position.x+e.attackRow.width&&e.isAttacking&&(t.health-=10,e.isAttacking=!1,A.style.width=`${t.health}%`),(t.health<=0||e.health<=0)&&x({player1:t,player2:e,timerId:u})},x=({player1:o,player2:s,timerId:r})=>{r&&clearInterval(r),y.style.display="block",o.health===s.health?y.textContent="Tie":o.health>s.health?y.textContent="Player 1 wins":y.textContent="Player 2 wins"},u=setInterval(()=>{f>0&&(f--,P.innerText=f.toString()),f===0&&x({player1:t,player2:e,timerId:u})},1e3);window.addEventListener("keydown",o=>{switch(o.key){case"d":c.d.pressed=!0,t.lastKeyPressed="d";break;case"a":c.a.pressed=!0,t.lastKeyPressed="a";break;case"w":t.velocity.y=-19;break;case" ":t.attack();break;case"ArrowLeft":c.ArrowLeft.pressed=!0,e.lastKeyPressed="ArrowLeft";break;case"ArrowRight":c.ArrowRight.pressed=!0,e.lastKeyPressed="ArrowRight";break;case"ArrowUp":e.velocity.y=-19;break;case"ArrowDown":e.attack();break}});window.addEventListener("keyup",o=>{switch(o.key){case"d":c.d.pressed=!1;break;case"a":c.a.pressed=!1;break;case"ArrowLeft":c.ArrowLeft.pressed=!1;break;case"ArrowRight":c.ArrowRight.pressed=!1;break}});p.fillRect(0,0,n.width,n.height);g();
